什么是分库分表？
1. 分库分表其实是为了减少单个数据库或者单个数据表里的数据量，从而提升数据表插入和查询的性能。
2. 同时分库分表也有助于划清多个微服务之间的系统边界，一个微服务对应一个数据库，边界会比较清晰，管理也较为方便

为什么要进行分库分表
1. 当系统体量达到一个数量级的时候，单个数据表实例无法有效承载所有的数据，或者查询效率急剧下降，所以要进行分表
2. 而一个数据库存储大量的数据也会不便于管理，并且所有业务都在同一个服务器上运行，会导致这个数据库服务器的负载过高，因此要分库

分库分表的方式
1. 垂直拆分：根据业务的不同，将一张表里的不同字段拆分到不同的表或者不同的库，这个时候需要修改原有的查询、新增、更新等逻辑，因为表也不同了
2. 水平拆分：根据用户、店铺、时间、id的hash等将一张表里的不同数据拆分到不同的表或者不同的库里，这时候在查询数据的时候就必须要知道，要去哪个库或者哪个表进行获取，这就涉及到一个分库后的路由

分表或者分库之后带来的问题
1. 原本可以用join语句完成的查询等操作需要用多次查询并且在内存里关联来完成
2. 原本可以在一个事务里保证事务性的操作，就无法利用数据库的事务特性来保证数据完整性了，需要使用分布式事务
3. 分布式事务分为刚性事务和柔性事务，刚性事务需要保证数据每一个时刻都必须是满足ACID的，而柔性事务则只要最终一致性即可
4. 刚性事务的框架主要有：atomikos,anaraya;柔性事务的主要代表有：seata、TCC和AT

